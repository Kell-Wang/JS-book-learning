<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>P31-Function.prototype.bind基础实现</title>
</head>
<body>
    <script>
        // 我们通过 Function.prototype.bind 来 "包装" func 函数，并且传入一个对象 context 当作参数，
        /// 这个 context 对象就是我们想修正的 this 对象。
        Function.prototype.bind = function(context) {
            // 保存原函数
            var self = this;
            // 返回一个新函数
            return function() {
                // 执行新的函数的时候，会把之前传入的 context 当作新函数体内的 this
                return self.apply(context, arguments);
            }
        };
        var obj = {
            name: "sven",
        };
        var func = function() {
            console.log(this.name);
        }.bind(obj);

        // 此步 func() 调用时上面的 bind() 方法已经执行完毕，bind() 方法把内部的 return 匿名函数放到全局环境中,
        // 但是由于匿名函数在 bind() 方法内形成闭包，根据作用域链 bind() 的作用域 return 的匿名函数始终可以访问到。
        func();
    </script>
</body>
</html>
