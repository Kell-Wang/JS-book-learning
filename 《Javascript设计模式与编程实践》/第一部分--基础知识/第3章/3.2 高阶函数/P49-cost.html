<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>P49-cost</title>
</head>
<body>
<div id="container"></div>


<script type="text/javascript">

    // Created on 20180514

    // 自执行的匿名函数打开页面就执行, 然后把 args 暴露在全局中;
    // 匿名函数只执行之后 ----->  let cost = function () {}
    // 【这就是一个函数表达式(见P49-cost-2.html)】
    let cost = (function () {
        let args = [];

        return function () {
            console.log(arguments);
            if (arguments.length === 0) {
                let money = 0;
                for (let i = 0, l = args.length; i < l; i++) {
                    money += args[i];
                }
                return money;
            } else {
                // 利用 apply() 方法 給 args 數組推入一项 (arguments)
                [].push.apply(args, arguments)
            }
        }

    })();

    // 加载页面后上面的 匿名函数自执行，cost 保存的为 return 返回的一个匿名函数，声明的 args 暴露在为全局变量
    // 上面的写法等于 P49-cost-2.html 页面中的写法
    console.log(cost);


    cost(100);
    // cost( 200 );
    // cost( 300 );
    //
    // console.log( cost() );
</script>
</body>
</html>
